# OutDID proof-of-concept passport prover

Warning! This is an academic-grade prototype and as such it does not claim to work reliably just yet.

This app scans NFC-enabled Machine Readable Travel Documents, such as international passports, and extracts the relevant cryptographic data for proofs using our [circom verifier](https://github.com/OutDID-io/passport-verifier-circom). It also integrates a natively compiled version of `rapidsnark` that can execute proofs in the app.

What this app can do right now:
- Scan some international passports (tested with a European passport) and generate the relevant `inputs.json` file in the format requested by our []circom verifier](https://github.com/OutDID-io/passport-verifier-circom)
- Given a witness file `w.wtns`, which can be easily derived from `inputs.json`, it can generate a proof of our circom circuit. In particular, that this passport is valid and unaltered.

What is work in progress:
- Witness generation: creating `w.wtns` from `inputs.json` in the app, so we would not involve a computer in the pipeline. Currently, you would have to copy the `inputs.json` to a computer and run the witness generation as explained in our [verifier repo](https://github.com/OutDID-io/passport-verifier-circom).

## Setup

### Prover

Compile and setup a fork of `rapidsnark` for android [here](https://github.com/idyllicvision/rapidsnark/tree/feature/android_x86_64_build). From that project directory, copy:
- `package_android_x86_64/*` to `app/jni/rapidsnark/arm64-v8a/`
- `depends/gmp/package_android_arm64/lib/libgmp.so` to `app/jni/rapidsnark/arm64-v8a/lib/`

### Asset files

You have to supply a ZK proving key (like the ones generated by `snarkjs`) in `app/src/main/assets/circuit_final.zkey`. In the same directory, also supply a valid witness, `w.wtns`.

Now gradle should build. This will produce an `inputs.json`, print it to the logcat, generate a proof from the asset files and print it too.

## Performance

- Reading a passport takes about 10s.
- Generating a proof took between 2 and 4 minutes on a modern phone, though could be further optimised.
